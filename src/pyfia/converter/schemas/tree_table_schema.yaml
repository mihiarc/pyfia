# FIA TREE Table Schema Definition
# Complete schema for the TREE table with all 196 columns
# This file defines the schema for individual tree measurements

version: "1.0"
description: "Complete schema definition for FIA TREE table with all 196 columns"

TREE:
  description: "Tree-level measurements - complete schema with all columns"
  columns:
    # Core identification columns (CN fields stored as VARCHAR due to large values)
    CN:
      type: "varchar(34)"
      nullable: false
      description: "Control number (stored as string for large values)"
    PLT_CN:
      type: "varchar(34)"
      nullable: false
      description: "Plot control number (stored as string for large values)"
    PREV_TRE_CN:
      type: "varchar(34)"
      nullable: true
      description: "Previous tree control number (stored as string for large values)"
      
    # Basic tree identification
    INVYR:
      type: "integer"
      nullable: false
      description: "Inventory year"
    STATECD:
      type: "smallint"
      nullable: false
      description: "State code"
    UNITCD:
      type: "integer"
      nullable: true
      description: "Unit code"
    COUNTYCD:
      type: "integer"
      nullable: true
      description: "County code"
    PLOT:
      type: "integer"
      nullable: false
      description: "Plot number"
    SUBP:
      type: "integer"
      nullable: false
      description: "Subplot number"
    TREE:
      type: "integer"
      nullable: false
      description: "Tree number"
    CONDID:
      type: "integer"
      nullable: false
      description: "Condition ID"
    PREVCOND:
      type: "integer"
      nullable: true
      description: "Previous condition ID"
      
    # Tree status and classification
    STATUSCD:
      type: "integer"
      nullable: false
      description: "Tree status code"
    SPCD:
      type: "integer"
      nullable: true
      description: "Species code"
    SPGRPCD:
      type: "integer"
      nullable: true
      description: "Species group code"
    TREECLCD:
      type: "integer"
      nullable: true
      description: "Tree class code"
    CCLCD:
      type: "integer"
      nullable: true
      description: "Crown class code"
    TREEGRCD:
      type: "integer"
      nullable: true
      description: "Tree grade code"
    AGENTCD:
      type: "integer"
      nullable: true
      description: "Agent code"
      
    # Measurements
    DIA:
      type: "decimal(6,2)"
      nullable: true
      description: "Diameter at breast height"
    DIAHTCD:
      type: "integer"
      nullable: true
      description: "Diameter height code"
    HT:
      type: "integer"
      nullable: true
      description: "Total height"
    HTCD:
      type: "integer"
      nullable: true
      description: "Height code"
    ACTUALHT:
      type: "integer"
      nullable: true
      description: "Actual height"
    CR:
      type: "integer"
      nullable: true
      description: "Compacted crown ratio"
    STOCKING:
      type: "decimal(8,4)"
      nullable: true
      description: "Stocking value"
      
    # Damage and condition codes
    CULL:
      type: "integer"
      nullable: true
      description: "Cull code"
    DAMLOC1:
      type: "integer"
      nullable: true
      description: "Damage location code 1"
    DAMTYP1:
      type: "integer"
      nullable: true
      description: "Damage type code 1"
    DAMSEV1:
      type: "integer"
      nullable: true
      description: "Damage severity code 1"
    DAMLOC2:
      type: "integer"
      nullable: true
      description: "Damage location code 2"
    DAMTYP2:
      type: "integer"
      nullable: true
      description: "Damage type code 2"
    DAMSEV2:
      type: "integer"
      nullable: true
      description: "Damage severity code 2"
    DECAYCD:
      type: "integer"
      nullable: true
      description: "Decay code"
    DAMAGE_AGENT_CD1:
      type: "integer"
      nullable: true
      description: "Damage agent code 1"
    DAMAGE_AGENT_CD2:
      type: "integer"
      nullable: true
      description: "Damage agent code 2"
    DAMAGE_AGENT_CD3:
      type: "integer"
      nullable: true
      description: "Damage agent code 3"
      
    # Volume calculations
    VOLCFNET:
      type: "decimal(10,3)"
      nullable: true
      description: "Net cubic foot volume"
    VOLCFGRS:
      type: "decimal(10,3)"
      nullable: true
      description: "Gross cubic foot volume"
    VOLCSNET:
      type: "decimal(10,3)"
      nullable: true
      description: "Net cubic foot sound volume"
    VOLCSGRS:
      type: "decimal(10,3)"
      nullable: true
      description: "Gross cubic foot sound volume"
    VOLBFNET:
      type: "decimal(10,3)"
      nullable: true
      description: "Net board foot volume"
    VOLBFGRS:
      type: "decimal(10,3)"
      nullable: true
      description: "Gross board foot volume"
    VOLCFSND:
      type: "decimal(10,3)"
      nullable: true
      description: "Sound cubic foot volume"
    VOLCSSND:
      type: "decimal(10,3)"
      nullable: true
      description: "Sound cubic foot sawlog volume"
      
    # Additional measurement fields
    DIACHECK:
      type: "integer"
      nullable: true
      description: "Diameter check code"
    WDLDSTEM:
      type: "integer"
      nullable: true
      description: "Woodland stem count"
    MORTYR:
      type: "integer"
      nullable: true
      description: "Mortality year"
    SALVCD:
      type: "integer"
      nullable: true
      description: "Salvage code"
    UNCRCD:
      type: "integer"
      nullable: true
      description: "Uncompressed crown code"
    CPOSCD:
      type: "integer"
      nullable: true
      description: "Crown position code"
    CLIGHTCD:
      type: "integer"
      nullable: true
      description: "Crown light code"
    CVIGORCD:
      type: "integer"
      nullable: true
      description: "Crown vigor code"
    CDENCD:
      type: "integer"
      nullable: true
      description: "Crown density code"
    CDIEBKCD:
      type: "integer"
      nullable: true
      description: "Crown dieback code"
    TRANSCD:
      type: "integer"
      nullable: true
      description: "Transition code"
    TREEHISTCD:
      type: "integer"
      nullable: true
      description: "Tree history code"
      
    # Age information
    BHAGE:
      type: "integer"
      nullable: true
      description: "Breast height age"
    TOTAGE:
      type: "integer"
      nullable: true
      description: "Total age"
      
    # Cull information
    CULLDEAD:
      type: "integer"
      nullable: true
      description: "Cull dead"
    CULLFORM:
      type: "integer"
      nullable: true
      description: "Cull form"
    CULLMSTOP:
      type: "integer"
      nullable: true
      description: "Cull merchantable top"
    CULLBF:
      type: "integer"
      nullable: true
      description: "Cull board foot"
    CULLCF:
      type: "integer"
      nullable: true
      description: "Cull cubic foot"
      
    # Sound wood information
    BFSND:
      type: "integer"
      nullable: true
      description: "Board foot sound"
    CFSND:
      type: "integer"
      nullable: true
      description: "Cubic foot sound"
      
    # Height measurements
    SAWHT:
      type: "integer"
      nullable: true
      description: "Saw height"
    BOLEHT:
      type: "integer"
      nullable: true
      description: "Bole height"
    HTDMP:
      type: "decimal(6,2)"
      nullable: true
      description: "Height DMP"
      
    # Form and calculation codes
    FORMCL:
      type: "integer"
      nullable: true
      description: "Form class"
    HTCALC:
      type: "integer"
      nullable: true
      description: "Height calculation code"
    HRDWD_CLUMP_CD:
      type: "integer"
      nullable: true
      description: "Hardwood clump code"
    SITREE:
      type: "integer"
      nullable: true
      description: "Site tree code"
      
    # Date fields (stored as VARCHAR due to mixed formats)
    CREATED_DATE:
      type: "varchar(30)"
      nullable: true
      description: "Created date"
    MODIFIED_DATE:
      type: "varchar(30)"
      nullable: true
      description: "Modified date"
      
    # Additional codes
    MORTCD:
      type: "integer"
      nullable: true
      description: "Mortality code"
    ROUGHCULL:
      type: "integer"
      nullable: true
      description: "Rough cull"
    MIST_CL_CD:
      type: "integer"
      nullable: true
      description: "Mistletoe class code"
    CULL_FLD:
      type: "integer"
      nullable: true
      description: "Cull field"
    RECONCILECD:
      type: "integer"
      nullable: true
      description: "Reconcile code"
    PREVDIA:
      type: "decimal(6,2)"
      nullable: true
      description: "Previous diameter"
      
    # Special flags
    P2A_GRM_FLG:
      type: "varchar(1)"
      nullable: true
      description: "P2A GRM flag"
      
    # Regional tree class codes
    TREECLCD_NERS:
      type: "integer"
      nullable: true
      description: "Tree class code NERS"
    TREECLCD_SRS:
      type: "integer"
      nullable: true
      description: "Tree class code SRS"
    TREECLCD_NCRS:
      type: "integer"
      nullable: true
      description: "Tree class code NCRS"
    TREECLCD_RMRS:
      type: "integer"
      nullable: true
      description: "Tree class code RMRS"
      
    # Standing dead and previous status
    STANDING_DEAD_CD:
      type: "integer"
      nullable: true
      description: "Standing dead code"
    PREV_STATUS_CD:
      type: "integer"
      nullable: true
      description: "Previous status code"
    PREV_WDLDSTEM:
      type: "integer"
      nullable: true
      description: "Previous woodland stem"
      
    # Trees per acre
    TPA_UNADJ:
      type: "decimal(8,4)"
      nullable: true
      description: "Trees per acre unadjusted"
      
    # Biomass calculations
    DRYBIO_BOLE:
      type: "decimal(10,3)"
      nullable: true
      description: "Dry biomass bole"
    DRYBIO_STUMP:
      type: "decimal(10,3)"
      nullable: true
      description: "Dry biomass stump"
    DRYBIO_BG:
      type: "decimal(10,3)"
      nullable: true
      description: "Belowground dry biomass"
    DRYBIO_AG:
      type: "decimal(10,3)"
      nullable: true
      description: "Aboveground dry biomass"
    DRYBIO_SAWLOG:
      type: "decimal(10,3)"
      nullable: true
      description: "Dry biomass sawlog"
    DRYBIO_STEM:
      type: "decimal(10,3)"
      nullable: true
      description: "Dry biomass stem"
    DRYBIO_STEM_BARK:
      type: "decimal(10,3)"
      nullable: true
      description: "Dry biomass stem with bark"
    DRYBIO_STUMP_BARK:
      type: "decimal(10,3)"
      nullable: true
      description: "Dry biomass stump with bark"
    DRYBIO_BOLE_BARK:
      type: "decimal(10,3)"
      nullable: true
      description: "Dry biomass bole with bark"
    DRYBIO_BRANCH:
      type: "decimal(10,3)"
      nullable: true
      description: "Dry biomass branch"
    DRYBIO_FOLIAGE:
      type: "decimal(10,3)"
      nullable: true
      description: "Dry biomass foliage"
    DRYBIO_SAWLOG_BARK:
      type: "decimal(10,3)"
      nullable: true
      description: "Dry biomass sawlog with bark"
      
    # Carbon calculations
    CARBON_AG:
      type: "decimal(10,3)"
      nullable: true
      description: "Aboveground carbon"
    CARBON_BG:
      type: "decimal(10,3)"
      nullable: true
      description: "Belowground carbon"
      
    # Cycle information
    CYCLE:
      type: "integer"
      nullable: true
      description: "Cycle number"
    SUBCYCLE:
      type: "integer"
      nullable: true
      description: "Subcycle number"
      
    # Pacific Northwest Regional (PNWRS) specific codes
    BORED_CD_PNWRS:
      type: "integer"
      nullable: true
      description: "Bored code PNWRS"
    DAMLOC1_PNWRS:
      type: "integer"
      nullable: true
      description: "Damage location 1 PNWRS"
    DAMLOC2_PNWRS:
      type: "integer"
      nullable: true
      description: "Damage location 2 PNWRS"
    DIACHECK_PNWRS:
      type: "integer"
      nullable: true
      description: "Diameter check PNWRS"
    DMG_AGENT1_CD_PNWRS:
      type: "integer"
      nullable: true
      description: "Damage agent 1 code PNWRS"
    DMG_AGENT2_CD_PNWRS:
      type: "integer"
      nullable: true
      description: "Damage agent 2 code PNWRS"
    DMG_AGENT3_CD_PNWRS:
      type: "integer"
      nullable: true
      description: "Damage agent 3 code PNWRS"
    MIST_CL_CD_PNWRS:
      type: "integer"
      nullable: true
      description: "Mistletoe class code PNWRS"
    SEVERITY1_CD_PNWRS:
      type: "integer"
      nullable: true
      description: "Severity 1 code PNWRS"
    SEVERITY1A_CD_PNWRS:
      type: "integer"
      nullable: true
      description: "Severity 1A code PNWRS"
    SEVERITY1B_CD_PNWRS:
      type: "integer"
      nullable: true
      description: "Severity 1B code PNWRS"
    SEVERITY2_CD_PNWRS:
      type: "integer"
      nullable: true
      description: "Severity 2 code PNWRS"
    SEVERITY2A_CD_PNWRS:
      type: "integer"
      nullable: true
      description: "Severity 2A code PNWRS"
    SEVERITY2B_CD_PNWRS:
      type: "integer"
      nullable: true
      description: "Severity 2B code PNWRS"
    SEVERITY3_CD_PNWRS:
      type: "integer"
      nullable: true
      description: "Severity 3 code PNWRS"
    UNKNOWN_DAMTYP1_PNWRS:
      type: "integer"
      nullable: true
      description: "Unknown damage type 1 PNWRS"
    UNKNOWN_DAMTYP2_PNWRS:
      type: "integer"
      nullable: true
      description: "Unknown damage type 2 PNWRS"
    EPIPHYTE_PNWRS:
      type: "integer"
      nullable: true
      description: "Epiphyte PNWRS"
    ROOT_HT_PNWRS:
      type: "integer"
      nullable: true
      description: "Root height PNWRS"
    CAVITY_USE_PNWRS:
      type: "varchar(1)"
      nullable: true
      description: "Cavity use PNWRS"
    CORE_LENGTH_PNWRS:
      type: "decimal(6,2)"
      nullable: true
      description: "Core length PNWRS"
    CULTURALLY_KILLED_PNWRS:
      type: "integer"
      nullable: true
      description: "Culturally killed PNWRS"
    DIA_EST_PNWRS:
      type: "decimal(6,2)"
      nullable: true
      description: "Diameter estimate PNWRS"
    GST_PNWRS:
      type: "varchar(1)"
      nullable: true
      description: "GST PNWRS"
    INC10YR_PNWRS:
      type: "integer"
      nullable: true
      description: "10 year increment PNWRS"
    INC5YRHT_PNWRS:
      type: "decimal(6,2)"
      nullable: true
      description: "5 year height increment PNWRS"
    INC5YR_PNWRS:
      type: "integer"
      nullable: true
      description: "5 year increment PNWRS"
    RING_COUNT_INNER_2INCHES_PNWRS:
      type: "integer"
      nullable: true
      description: "Ring count inner 2 inches PNWRS"
    RING_COUNT_PNWRS:
      type: "integer"
      nullable: true
      description: "Ring count PNWRS"
    SNAG_DIS_CD_PNWRS:
      type: "integer"
      nullable: true
      description: "Snag distribution code PNWRS"
      
    # Southern Regional (SRS) specific codes
    PREV_PNTN_SRS:
      type: "integer"
      nullable: true
      description: "Previous plantation SRS"
    DISEASE_SRS:
      type: "integer"
      nullable: true
      description: "Disease SRS"
    DIEBACK_SEVERITY_SRS:
      type: "integer"
      nullable: true
      description: "Dieback severity SRS"
    DAMAGE_AGENT_CD1_SRS:
      type: "integer"
      nullable: true
      description: "Damage agent code 1 SRS"
    DAMAGE_AGENT_CD2_SRS:
      type: "integer"
      nullable: true
      description: "Damage agent code 2 SRS"
    DAMAGE_AGENT_CD3_SRS:
      type: "integer"
      nullable: true
      description: "Damage agent code 3 SRS"
    SAPLING_FUSIFORM_SRS:
      type: "integer"
      nullable: true
      description: "Sapling fusiform SRS"
      
    # Diameter measurements
    CENTROID_DIA:
      type: "decimal(6,2)"
      nullable: true
      description: "Centroid diameter"
    CENTROID_DIA_HT:
      type: "decimal(6,2)"
      nullable: true
      description: "Centroid diameter height"
    CENTROID_DIA_HT_ACTUAL:
      type: "decimal(6,2)"
      nullable: true
      description: "Centroid diameter height actual"
    UPPER_DIA:
      type: "decimal(6,2)"
      nullable: true
      description: "Upper diameter"
    UPPER_DIA_HT:
      type: "decimal(6,2)"
      nullable: true
      description: "Upper diameter height"
      
    # Height calculations
    ACTUALHT_CALC:
      type: "integer"
      nullable: true
      description: "Actual height calculation"
    ACTUALHT_CALC_CD:
      type: "integer"
      nullable: true
      description: "Actual height calculation code"
      
    # Cull calculations
    CULL_BF_ROTTEN:
      type: "decimal(10,3)"
      nullable: true
      description: "Cull board foot rotten"
    CULL_BF_ROTTEN_CD:
      type: "integer"
      nullable: true
      description: "Cull board foot rotten code"
    CULL_BF_ROUGH:
      type: "decimal(10,3)"
      nullable: true
      description: "Cull board foot rough"
    CULL_BF_ROUGH_CD:
      type: "integer"
      nullable: true
      description: "Cull board foot rough code"
    PREVDIA_FLD:
      type: "decimal(6,2)"
      nullable: true
      description: "Previous diameter field"
      
    # Northern Central Regional (NCRS) specific codes
    TREECLCD_31_NCRS:
      type: "integer"
      nullable: true
      description: "Tree class code 31 NCRS"
    TREE_GRADE_NCRS:
      type: "integer"
      nullable: true
      description: "Tree grade NCRS"
    BOUGHS_AVAILABLE_NCRS:
      type: "integer"
      nullable: true
      description: "Boughs available NCRS"
    BOUGHS_HRVST_NCRS:
      type: "integer"
      nullable: true
      description: "Boughs harvest NCRS"
      
    # Northeastern Regional (NERS) specific codes
    TREECLCD_31_NERS:
      type: "integer"
      nullable: true
      description: "Tree class code 31 NERS"
    AGENTCD_NERS:
      type: "integer"
      nullable: true
      description: "Agent code NERS"
    BFSNDCD_NERS:
      type: "integer"
      nullable: true
      description: "Board foot sound code NERS"
      
    # Rocky Mountain Regional (RMRS) specific codes
    AGECHKCD_RMRS:
      type: "integer"
      nullable: true
      description: "Age check code RMRS"
    PREV_AGECHKCD_RMRS:
      type: "integer"
      nullable: true
      description: "Previous age check code RMRS"
    PREV_BHAGE_RMRS:
      type: "integer"
      nullable: true
      description: "Previous breast height age RMRS"
    PREV_TOTAGE_RMRS:
      type: "integer"
      nullable: true
      description: "Previous total age RMRS"
    PREV_TREECLCD_RMRS:
      type: "integer"
      nullable: true
      description: "Previous tree class code RMRS"
    RADAGECD_RMRS:
      type: "integer"
      nullable: true
      description: "Radial age code RMRS"
    RADGRW_RMRS:
      type: "integer"
      nullable: true
      description: "Radial growth RMRS"
      
    # Board sawlog volumes
    VOLBSGRS:
      type: "decimal(10,3)"
      nullable: true
      description: "Gross board sawlog volume"
    VOLBSNET:
      type: "decimal(10,3)"
      nullable: true
      description: "Net board sawlog volume"
      
    # Cone and mast information
    CONEPRESCD1:
      type: "integer"
      nullable: true
      description: "Cone presence code 1"
    CONEPRESCD2:
      type: "integer"
      nullable: true
      description: "Cone presence code 2"
    CONEPRESCD3:
      type: "integer"
      nullable: true
      description: "Cone presence code 3"
    MASTCD:
      type: "integer"
      nullable: true
      description: "Mast code"
      
    # Top sawlog volumes
    VOLTSGRS:
      type: "decimal(10,3)"
      nullable: true
      description: "Gross top sawlog volume"
    VOLTSGRS_BARK:
      type: "decimal(10,3)"
      nullable: true
      description: "Gross top sawlog volume with bark"
    VOLTSSND:
      type: "decimal(10,3)"
      nullable: true
      description: "Sound top sawlog volume"
    VOLTSSND_BARK:
      type: "decimal(10,3)"
      nullable: true
      description: "Sound top sawlog volume with bark"
      
    # Stump volumes
    VOLCFGRS_STUMP:
      type: "decimal(10,3)"
      nullable: true
      description: "Gross cubic foot stump volume"
    VOLCFGRS_STUMP_BARK:
      type: "decimal(10,3)"
      nullable: true
      description: "Gross cubic foot stump volume with bark"
    VOLCFSND_STUMP:
      type: "decimal(10,3)"
      nullable: true
      description: "Sound cubic foot stump volume"
    VOLCFSND_STUMP_BARK:
      type: "decimal(10,3)"
      nullable: true
      description: "Sound cubic foot stump volume with bark"
      
    # Bark volumes
    VOLCFGRS_BARK:
      type: "decimal(10,3)"
      nullable: true
      description: "Gross cubic foot volume with bark"
    VOLCFGRS_TOP:
      type: "decimal(10,3)"
      nullable: true
      description: "Gross cubic foot top volume"
    VOLCFGRS_TOP_BARK:
      type: "decimal(10,3)"
      nullable: true
      description: "Gross cubic foot top volume with bark"
    VOLCFSND_BARK:
      type: "decimal(10,3)"
      nullable: true
      description: "Sound cubic foot volume with bark"
    VOLCFSND_TOP:
      type: "decimal(10,3)"
      nullable: true
      description: "Sound cubic foot top volume"
    VOLCFSND_TOP_BARK:
      type: "decimal(10,3)"
      nullable: true
      description: "Sound cubic foot top volume with bark"
    VOLCFNET_BARK:
      type: "decimal(10,3)"
      nullable: true
      description: "Net cubic foot volume with bark"
    VOLCSGRS_BARK:
      type: "decimal(10,3)"
      nullable: true
      description: "Gross cubic foot sawlog volume with bark"
    VOLCSSND_BARK:
      type: "decimal(10,3)"
      nullable: true
      description: "Sound cubic foot sawlog volume with bark"
    VOLCSNET_BARK:
      type: "decimal(10,3)"
      nullable: true
      description: "Net cubic foot sawlog volume with bark"
      
    # Previous field measurements
    PREV_ACTUALHT_FLD:
      type: "integer"
      nullable: true
      description: "Previous actual height field"
    PREV_HT_FLD:
      type: "integer"
      nullable: true
      description: "Previous height field"
      
    # Utilization class
    UTILCLCD:
      type: "integer"
      nullable: true
      description: "Utilization class code"

# Schema metadata
metadata:
  notes:
    - "Complete TREE table schema with all 196 columns from FIA DataMart"
    - "CN fields use VARCHAR(34) to handle large numeric values that exceed BIGINT capacity"
    - "Date fields use VARCHAR due to mixed format data"
    - "Regional codes (PNWRS, SRS, NCRS, NERS, RMRS) are region-specific measurements"
    - "Volume measurements use DECIMAL(10,3) for precision"
    - "Biomass measurements use DECIMAL(10,3) for precision"
    - "Most integer codes use SMALLINT to accommodate full range of FIA codes"
    - "All columns are nullable except core identification fields"
  regional_codes:
    - "PNWRS: Pacific Northwest Research Station"
    - "SRS: Southern Research Station"
    - "NCRS: North Central Research Station"
    - "NERS: Northeastern Research Station"
    - "RMRS: Rocky Mountain Research Station"